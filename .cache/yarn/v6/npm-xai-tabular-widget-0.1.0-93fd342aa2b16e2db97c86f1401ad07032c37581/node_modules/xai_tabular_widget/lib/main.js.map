{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app.ts","./src/app/app.ng.html","./src/app/app_module.ts","./src/environments/environment.ts","./src/main.ts","./src/tabular_feature_attr/attr_bar_chart.ts","./src/tabular_feature_attr/attr_bar_chart.ng.html","./src/tabular_feature_attr/feature_attr_service.ts","./src/tabular_feature_attr/tabular_explanation.ts","./src/tabular_feature_attr/tabular_feature_attr_module.ts","./src/tabular_feature_attr/tooltip.directive.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import {Component} from '@angular/core';\n\n/**\n * The root component.\n */\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.ng.html',\n  styleUrls: ['./app.scss']\n})\nexport class App {\n  title = 'webapp';\n}\n","<div class=\"inline attr-component\">\n  <app-attr-bar-chart></app-attr-bar-chart>\n</div>\n","import {HttpClientModule} from '@angular/common/http';\nimport {NgModule} from '@angular/core';\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\n\nimport {TabularFeatureAttrModule} from '../tabular_feature_attr/tabular_feature_attr_module';\n\nimport {App} from './app';\n\n/**\n * The main application module.\n */\n@NgModule({\n  declarations: [\n    App,\n  ],\n  imports: [\n    BrowserAnimationsModule,\n    HttpClientModule,\n    TabularFeatureAttrModule,\n  ],\n  providers: [],\n  bootstrap: [App]\n})\nexport class AppModule {\n}\n","/**\n * @fileoverview Configure the environment to be non-production.\n *\n * This is used in non-Google3 environment only.\n */\n\n// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`,\n * `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a\n * negative impact on performance if an error is thrown.\n */","import {enableProdMode} from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { AppModule } from './app/app_module';\nimport { environment } from './environments/environment';\n\nif (environment.production) enableProdMode();\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));;\n","import {AfterViewInit, ChangeDetectorRef, Component, OnDestroy} from '@angular/core';\nimport {ElementRef, ViewChild} from '@angular/core';\nimport * as d3 from 'd3';\nimport {ReplaySubject} from 'rxjs';\nimport {takeUntil} from 'rxjs/operators';\n\nimport {FeatureAttrService} from './feature_attr_service';\nimport {TabularExplanation} from './tabular_explanation';\n\ndeclare type GSelectType =\n    d3.Selection<d3.BaseType, unknown, HTMLElement|null, unknown>;\n\n/**\n * AttrBarChart: a component for showing the bar chart of attribution\n * values. Each bar represents the attribution score of a given feature.\n */\n@Component({\n  selector: 'app-attr-bar-chart',\n  templateUrl: './attr_bar_chart.ng.html',\n  styleUrls: ['./attr_bar_chart.scss']\n})\nexport class AttrBarChart implements AfterViewInit, OnDestroy {\n  @ViewChild('attr_bar_chart') attrBarChartSvg?: ElementRef;\n  readonly tabularExplain = this.featureAttrService.tabularExplainSource;\n  private readonly barWidth = 20;\n  private readonly width = 410;\n  private readonly baseHeight = 110;\n  private height = 120;\n  private readonly minBarLength = 5;\n  private readonly margin: Margin = {\n    left: 120,\n    top: 30,\n    bottom: 15,\n    right: 10,\n  };\n\n  // Public fields for the Angular template\n  features: string[] = [];\n  data = new Map<string, number>();\n  values = new Map<string, number|string>();\n  approxError?: number;\n  highApproxError = false;\n  prediction = 0;\n  baseline = 0;\n  range=0;\n  barColors = [\n    '#d73027', '#ef7043', '#fca964', '#fee090', '#e0f3f8', '#a1cae2', '#6fa0cb',\n    '#4575b4'\n  ];\n  date = new Date().toLocaleString();\n\n  // Handle on-destroy Subject, used to unsubscribe.\n  private readonly destroyed = new ReplaySubject<void>(1);\n\n  constructor(\n      private readonly cd: ChangeDetectorRef,\n      private readonly featureAttrService: FeatureAttrService) {}\n\n  ngAfterViewInit() {\n    const readyEvent = new CustomEvent('readyEvent', {detail: {ready: true}});\n    window.parent.document.dispatchEvent(readyEvent);\n    this.tabularExplain.pipe(takeUntil(this.destroyed))\n        .subscribe((explanation: TabularExplanation) => {\n          if (this.attrBarChartSvg) {\n            const data = new Map(Object.entries(explanation.attrs));\n            const values = new Map(Object.entries(explanation.inputValues));\n            this.approxError = explanation.approximationError;\n            if(this.approxError && this.approxError > 0.05) {\n              this.highApproxError = true;\n            }\n            this.prediction = Number(explanation.prediction.toFixed(5));\n            this.baseline = Number(explanation.baseline.toFixed(5));\n\n            this.drawBarChart(this.attrBarChartSvg, data, values);\n\n            const iframeResizeEvent = new CustomEvent('iframeResizeEvent', {detail: document.documentElement.scrollHeight});\n            window.parent.document.dispatchEvent(iframeResizeEvent);\n          }\n        });\n  }\n\n  ngOnDestroy() {\n    // Unsubscribes all pending subscriptions.\n    this.destroyed.next();\n    this.destroyed.complete();\n  }\n\n  /**\n   * The main function for drawing the bar chart onto the SVG\n   * element.\n   */\n  private drawBarChart(\n      targetEle: ElementRef|undefined, data: Map<string, number>,\n      values: Map<string, number|string>) {\n    if (!targetEle) {\n      throw new Error('undefined target for visualization');\n    } else {\n      const g = this.getAdjustedSVGGElement(targetEle, data.size);\n\n      // sort data for easy viewing\n      const dataArr = Array.from(data.entries());\n      dataArr.sort((a, b) => d3.ascending(a[1], b[1]));\n      const dataMax = dataArr[dataArr.length - 1][1];\n      const dataMin = dataArr[0][1];\n      const sortedData = new Map(dataArr);\n\n      // populate public fields, which propagate to the Angular template\n      this.features = Array.from(sortedData.keys());\n      this.data = sortedData;\n      this.values = values;\n\n      // get xScale and xDomains\n      const yScale = this.getYScale(sortedData);\n\n      const xScale = this.getXScale(dataMax, dataMin);\n\n      const colorScale = this.getColorScale(dataMax, dataMin);\n\n      this.addXAxis(g, xScale);\n      this.addYAxis(g, yScale, values);\n\n      this.cd.detectChanges();\n      this.addBars(g, sortedData, xScale, yScale, colorScale);\n    }\n  }\n\n  /**\n   * Adjust the size of the SVG and adjust margins via\n   * g element transform. Then return the selection of SVGGElement.\n   */\n  private getAdjustedSVGGElement(targetEle: ElementRef, featureCount: number):\n      GSelectType {\n    const ele = targetEle.nativeElement;\n    this.height = this.baseHeight + (2 * this.barWidth * featureCount);\n    const selectedEle =\n        d3.select(ele)\n            .style('width', this.width + this.margin.left + this.margin.right)\n            .style(\n                'height', this.height + this.margin.top + this.margin.bottom);\n\n    const g = selectedEle\n                  .select('g')\n                  // set margin\n                  .attr(\n                      'transform',\n                      `translate(${this.margin.left}, ${this.margin.top})`);\n\n    return g;\n  }\n\n\n  /**\n   * Given the dataset, return the scale of x axis.\n   */\n  private getYScale(data: Map<string, number>): d3.ScaleBand<string> {\n    const yScale = d3.scaleBand<string>()\n                       .range([this.height, 0])\n                       .domain(Array.from(data.keys()));\n    return yScale;\n  }\n\n  /**\n   * Given the dataset, return the y axis scale.\n   */\n  private getXScale(dataMax: number, dataMin: number):\n      d3.ScaleLinear<number, number> {\n    const xScale = d3.scaleLinear<number>()\n                       .domain([Math.min(0, dataMin), Math.max(0, dataMax)])\n                       .range([0, this.width])\n                       .nice();\n    return xScale;\n  }\n\n  private getColorScale(dataMax: number, dataMin: number):\n      d3.ScaleThreshold<number, string> {\n    this.range = Math.max(Math.abs(dataMax), Math.abs(dataMin));\n    // Colors are separated for positive and negative scales, with 4 blue shades\n    // being split on equal intervals between 0 and the max attribution, and 4\n    // red-yellow shades on equal intervals between the min attribution and 0.\n    const colorScale = d3.scaleThreshold<number, string>()\n                           .domain([\n                             3.0 * -this.range / 4.0, -this.range / 2.0,\n                             -this.range / 4.0, 0, this.range / 4.0,\n                             this.range / 2.0, 3.0 * this.range / 4.0\n                           ])\n                           .range(this.barColors);\n    return colorScale;\n  }\n\n  /**\n   * Given selected g element, xScale, yScale and data, add bar chart\n   * bars to the g element.\n   */\n  private addBars(\n      g: GSelectType, data: Map<string, number>,\n      xScale: d3.ScaleLinear<number, number>, yScale: d3.ScaleBand<string>,\n      colorScale: d3.ScaleThreshold<number, string>) {\n    // appending the bar chart bars\n    const bars = g.selectAll('.bar');\n    bars.each((datum, index, nodes) => {\n      const feature = String(this.features[index]);\n      const attribution = Number(data.get(feature));\n\n      const length = Math.abs(xScale(0) - xScale(attribution));\n      const x = xScale(Math.min(0, attribution));\n      const y = yScale(feature)! + (yScale.bandwidth() - this.barWidth) / 2;\n      const currElement = nodes[index];\n      d3.select(currElement)\n          .append('rect')\n          .attr('height', this.barWidth)\n          .attr('width', length)\n          .attr('x', x)\n          .attr('y', y)\n          .style('fill', colorScale(attribution));\n      // Add invisible rect to enable tooltip mousover at small sizes\n      d3.select(currElement)\n          .append('rect')\n          .attr('height', this.barWidth)\n          .attr('width', length + (2 * this.minBarLength))\n          .attr('x', x - this.minBarLength)\n          .attr('y', y)\n          .style('fill-opacity', 0);\n    });\n  }\n\n  /**\n   * Given selected g element and yScale, add the yAxis (including\n   * the ticks and label) to the g element.\n   */\n  private addYAxis(\n      g: GSelectType, yScale: d3.ScaleBand<string>,\n      values: Map<string, number|string>) {\n    // initialize a new y axis with truncation of feature labels so that\n    // everything fits properly\n    const yAxisScale = d3.axisLeft(yScale).tickFormat(\n        key => key.length > 10 ? key.substring(0, 10) + '...' : key);\n\n    // append that y axis to the <g>\n    g.select('.axes')\n        .append('g')\n        .attr('class', 'axis y-axis')\n        .call(yAxisScale)\n        .call(g => {\n          g.select('.domain').remove();\n        })\n        .call(g => {\n          g.selectAll('.tick line').remove();\n        })\n        .call(g => {\n          g.selectAll('.tick text')\n              .attr('font-weight', 'bold')\n              .attr('text-anchor', 'end')\n              .attr('class', 'axis-tick');\n        })\n        .call(g => {\n          g.selectAll('.tick')\n              .append('text')\n              .text(t => {\n                const str = String(values.get(String(t))!);\n                return str.length > 10 ? str.substring(0, 10) + '...' : str;\n              })\n              .attr('class', 'tick-value')\n              .attr('transform', 'translate(-10, 20)');\n        });\n  }\n\n  /**\n   * Given selected g element and xScale, add the xAxis (including\n   * the ticks and label) to the g element.\n   */\n  private addXAxis(g: GSelectType, xScale: d3.ScaleLinear<number, number>) {\n    // initialize a new x axis with truncation of feature labels so that\n    // everything fits properly\n    const xAxis = d3.axisBottom(xScale).tickFormat(d3.format('.1f'));\n\n    // append that x axis to the <g>\n    g.select('.axes').append('g')\n        .attr('class', 'axis x-axis')\n        .call(xAxis.tickSize(this.height))\n        .call(g => {\n          g.select('.domain').remove();\n        })\n        .call(g => {\n          g.selectAll('.tick line').style('stroke', '#AAAAAA');\n        })\n        .call(g => {\n          g.selectAll('.tick text')\n              .attr('transform', `translate(0, ${- 20 - this.height})`)\n              .attr('class', 'axis-tick');\n        });\n  }\n}\n\ninterface Margin {\n  left: number;\n  right: number;\n  top: number;\n  bottom: number;\n}\n","<div class=\"bar-chart-container\">\n  <link href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" rel=\"stylesheet\">\n\n  <h2 class=\"block-title\">\n    Feature Attributions\n    <!-- TODO(b/179193733): Update links to use Pantheon's doc url system (go/pantheon-doclink) -->\n    <a class=\"learn-more-link\" href='https://cloud.google.com/ai-platform-unified/docs/explainable-ai/limitations' target=\"_blank\" rel=\"noreferrer noopener\">\n      <img src='https://fonts.gstatic.com/s/i/googlematerialicons/info_outline/v11/gm_grey-24dp/1x/gm_info_outline_gm_grey_24dp.png' aria-label='info'>\n    </a>\n\n    <div class=\"learn-more-text\">\n      Learn more about\n      <!-- TODO(b/179193733): Update links to use Pantheon's doc url system (go/pantheon-doclink) -->\n      <a class=\"learn-more-link\" href='https://cloud.google.com/ai-platform-unified/docs/explainable-ai/overview' target=\"_blank\" rel=\"noreferrer noopener\">\n        Explainable AI\n        <span class=\"material-icons learn-more-link-icon\">\n          open_in_new\n        </span>\n      </a>\n    </div>\n  </h2>\n\n  <div>\n    <div class=\"prediction-label\">\n      Prediction Score:\n      <span class=\"prediction-text\">{{prediction}}</span>\n    </div>\n    <div class=\"baseline-text\">\n      Baseline Score: {{baseline}}\n    </div>\n  </div>\n  <div class=\"color-scale\">\n    {{(-range).toFixed(1)}}\n    <svg class=\"color-scale-key\" style=\"height: 20px; width: {{barColors.length * 20}}px;\">\n      <rect class=\"color-scale-segments\" *ngFor=\"let color of barColors; index as idx;\" style=\"fill:{{color}}; x:{{idx * 20}};\"></rect>\n    </svg>\n    {{range.toFixed(1)}}\n    <div class=\"color-scale-labels\" style=\"width: {{barColors.length * 20}}px;\">\n      <div class=\"color-scale-neg-label\">\n        negative\n      </div>\n      <div class=\"color-scale-pos-label\">\n        positive\n      </div>\n    </div>\n  </div>\n\n  <div class=\"approx-error-warning\" *ngIf=\"highApproxError\">\n    <span class=\"material-icons approx-error-img\" aria-label=\"warning\">warning</span>\n    <div>\n      High Approximation Error ({{approxError.toFixed(2)}})\n      <!-- TODO(b/179193733): Update links to use Pantheon's doc url system (go/pantheon-doclink) -->\n      <a class=\"learn-more-link\" href='https://cloud.google.com/ai-platform-unified/docs/explainable-ai/improving-explanations' target=\"_blank\" rel=\"noreferrer noopener\">\n        Learn more\n        <span class=\"material-icons learn-more-link-icon\">\n          open_in_new\n        </span>\n      </a>\n      <div class=\"approx-error-message\">\n        Attributions may not be accurate, try increasing # of steps.\n      </div>\n    </div>\n  </div>\n\n  <svg #attr_bar_chart>\n    <g>\n      <g class=\"axes\"></g>\n      <g class=\"bar\" *ngFor=\"let feature of features\" tooltip=\"Feature: {{feature}}&#13;Attribution: {{data.get(feature)}}&#13;Value: {{values.get(feature)}}\">\n      </g>\n    </g>\n  </svg>\n\n  <div class=\"chart-date-label\">\n    Charted at {{date}}\n  </div>\n</div>\n","import {HttpClient} from '@angular/common/http';\nimport {Injectable, OnDestroy} from '@angular/core';\nimport {fromEvent, ReplaySubject} from 'rxjs';\nimport {takeUntil} from 'rxjs/operators';\n\nimport {AttributionsTabularDict} from './attributions';\nimport {LoadDataFromJsonEvent, LoadDataFromUrlEvent, LoadDataFromDictEvent} from './data_events';\nimport {TabularExplanation} from './tabular_explanation';\n\n/**\n * A service for loading and holding explanation data.\n * LoadDataEvents will be triggered from the widget.\n */\n@Injectable({providedIn: 'root'})\nexport class FeatureAttrService implements OnDestroy {\n  private readonly tabularExplanation = new TabularExplanation();\n  readonly tabularExplainSource = new ReplaySubject<TabularExplanation>(1);\n  errorMessages: string[] = [];\n\n  // Handle on-destroy Subject, used to unsubscribe.\n  private readonly destroyed = new ReplaySubject<void>(1);\n\n  constructor(private readonly http: HttpClient) {\n    // Set to react to the load data event (from json object)\n    fromEvent(document, 'loadDataFromDictEvent')\n        .pipe(takeUntil(this.destroyed))\n        .subscribe((e: Event) => {\n          const dataEvent = e as LoadDataFromDictEvent;\n          this.loadDataFromDict(dataEvent.detail.data);\n        });\n\n    // Set to react to the load data event (from json object)\n    fromEvent(document, 'loadDataFromJsonEvent')\n        .pipe(takeUntil(this.destroyed))\n        .subscribe((e: Event) => {\n          const dataEvent = e as LoadDataFromJsonEvent;\n          this.loadDataFromJson(dataEvent.detail.data);\n        });\n\n    // Set to react to the load data event (from an Url)\n    fromEvent(document, 'loadDataFromUrlEvent')\n        .pipe(takeUntil(this.destroyed))\n        .subscribe((e: Event) => {\n          const dataEvent = e as LoadDataFromUrlEvent;\n          this.loadDataFromUrl(dataEvent.detail.url);\n        });\n  }\n\n  /**\n   * Given an attribution dict, initialize the tabularExplanation,\n   * and notify the subscribers to update.\n   */\n  private loadDataFromDict(data: AttributionsTabularDict) {\n    this.tabularExplanation.initializeTabular(data);\n    this.tabularExplainSource.next(this.tabularExplanation);\n  }\n\n  /**\n   * Given a json string, instantiate the contents of that string as an\n   * attribution dict and trigger loadDataFromDict.\n   */\n  private loadDataFromJson(data: string) {\n    const jsonData = JSON.parse(data) as AttributionsTabularDict;\n    this.loadDataFromDict(jsonData);\n  }\n\n  /**\n   * Given a url, fetch the json file and trigger\n   * loadDataFromJson. If it fails, show error messages.\n   */\n  private loadDataFromUrl(url: string) {\n    this.errorMessages = [];\n    const data = this.http.get<string>(url);\n    data.subscribe({\n      next: (response: string) => {\n        this.loadDataFromJson(response);\n      },\n      error: (response: {error: string;}) => {\n        this.errorMessages.push(response.error);\n      }\n    });\n    if (this.errorMessages.length > 0) {\n      alert('Errors:\\n' + this.errorMessages.join('\\n'));\n    }\n  }\n\n  /**\n   * Get the tabular explanation object.\n   */\n  getTabularExplanation(): TabularExplanation {\n    return this.tabularExplanation;\n  }\n\n  ngOnDestroy() {\n    this.destroyed.next();\n    this.destroyed.complete();\n  }\n}\n","/**\n * @fileoverview This file contains the definition of the Explanation class.\n * The explanation instance can be initialized with explanation data in json\n * format.\n */\n\nimport {AttributionsTabularDict} from './attributions';\n\n/**\n * TabularExplanation class contains information about the tabular features,\n * including attributions for each featuree, and other explanation related\n * properties for visualization.\n */\nexport class TabularExplanation {\n  attrs: {[key: string]: number;} = {};  // feature attribution\n  inputValues: {[key: string]: string|number;} = {};\n  maxAttrVal = 0;\n  hasInitialized = false;\n  approximationError?: number;\n  prediction = 0;\n  baseline = 0;\n\n  /**\n   * Initialize the explanation from attribution json for a feature.\n   */\n  initializeTabular(data: AttributionsTabularDict) {\n    Object.entries(data.attributions).forEach(entry => {\n      this.attrs[entry[0]] = entry[1].reduce((a, b) => a + b, 0);\n    });\n    this.processValues(data);\n    this.approximationError = data.approx_error;\n    this.prediction = data.example_score;\n    this.baseline = data.baseline_score;\n    this.initialize();\n  }\n\n\n  /**\n   * initialize(): Initialize image size, max attribution val, initialize image,\n   * and reset visible range.\n   */\n  private initialize() {\n    this.findMaxAttrVal();\n    this.hasInitialized = true;\n  }\n\n  /**\n   * Find the maximum absolute value in the attributions.\n   */\n  private findMaxAttrVal() {\n    this.maxAttrVal = Math.max(...Object.values(this.attrs));\n  }\n\n  private processValues(data: AttributionsTabularDict) {\n    for (const [feature, values] of Object.entries(data.input_values_dict)) {\n      if (Array.isArray(values)) {\n        if (values.length === 0) {\n          this.inputValues[feature] = '';\n        } else if (isNumberArr(values)) {\n          this.inputValues[feature] = (values).reduce((a, b) => a + b, 0);\n        } else {\n          this.inputValues[feature] = (values).join(' ');\n        }\n      } else {\n        this.inputValues[feature] = values;\n      }\n    }\n  }\n}\n\n/**\n * isNumberArr(): Type guard for arrays of only numbers to enable summation\n */\nfunction isNumberArr(arg: unknown): arg is number[] {\n  if (Array.isArray(arg)) {\n    for (const i of arg) {\n      if (typeof i !== 'number') {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\n","import {CommonModule} from '@angular/common';\nimport {HttpClientModule} from '@angular/common/http';\nimport {NgModule} from '@angular/core';\n// BEGIN OSS\nimport {MatTooltipModule} from '@angular/material/tooltip';\n// END OSS\n/* BEGIN PANTHEON\n// [Pantheon tooltip]\n// END PANTHEON */\n\nimport {AttrBarChart} from './attr_bar_chart';\nimport {TooltipDirective} from './tooltip.directive';\n\n@NgModule({\n  imports: [\n    CommonModule, HttpClientModule,\n    // BEGIN OSS\n    MatTooltipModule,\n    // END OSS\n    /* BEGIN PANTHEON\n    // [Pantheon tooltip]\n    // END PANTHEON */\n  ],\n  declarations: [AttrBarChart, TooltipDirective],\n  exports: [AttrBarChart]\n})\nexport class TabularFeatureAttrModule {\n}\n","import {Directive, HostListener, Input} from '@angular/core';\n// BEGIN OSS\nimport {MatTooltip} from '@angular/material/tooltip';\n// END OSS\n/* BEGIN PANTHEON\n// [Pantheon tooltip]\n// END PANTHEON */\n\n/**\n * TooltipDirective: a directive for populating the Angular template with the\n * correct tooltip type, depending on the environment\n */\n// BEGIN OSS\n@Directive({selector: '[tooltip]', providers: [MatTooltip]})\nexport class TooltipDirective {\n// END OSS\n/* BEGIN PANTHEON\n// [Pantheon tooltip]\n// END PANTHEON */\n\n  @Input('tooltip') tooltipMessage?: string;\n\n  // BEGIN OSS\n  constructor(private readonly tooltip: MatTooltip) {}\n  // END OSS\n  /* BEGIN PANTHEON\n  // [Pantheon tooltip]\n  // END PANTHEON */\n\n  @HostListener('mouseover')\n  mouseover() {\n    this.tooltip.message = this.tooltipMessage!;\n    this.tooltip.show();\n  }\n\n  @HostListener('mouseout')\n  mouseout() {\n    this.tooltip.hide();\n  }\n}\n"],"sourceRoot":"webpack:///"}